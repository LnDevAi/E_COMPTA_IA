"use strict";(self.webpackChunke_compta_ia=self.webpackChunke_compta_ia||[]).push([[866],{7647:(m,_,a)=>{a.r(_),a.d(_,{FilterJournalPipe:()=>h,JournalsComponent:()=>D});var p=a(177),c=a(4341),t=a(4438),b=a(1941);function E(i,s){if(1&i&&(t.j41(0,"div",23),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.JRh(e.err)}}function g(i,s){if(1&i&&(t.j41(0,"div",24),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.JRh(e.ok)}}function F(i,s){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"input",7),t.mxI("ngModelChange",function(n){t.eBV(e);const r=t.XpG(2);return t.DH7(r.editLabel,n)||(r.editLabel=n),t.Njj(n)}),t.k0s(),t.bVm()}if(2&i){const e=t.XpG(2);t.R7$(),t.R50("ngModel",e.editLabel)}}function f(i,s){if(1&i&&t.EFF(0),2&i){const e=t.XpG().$implicit;t.JRh(e.libelle)}}function C(i,s){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"select",7),t.mxI("ngModelChange",function(n){t.eBV(e);const r=t.XpG(2);return t.DH7(r.editType,n)||(r.editType=n),t.Njj(n)}),t.j41(2,"option",8),t.EFF(3,"Achats"),t.k0s(),t.j41(4,"option",9),t.EFF(5,"Ventes"),t.k0s(),t.j41(6,"option",10),t.EFF(7,"Banque"),t.k0s(),t.j41(8,"option",11),t.EFF(9,"Op\xe9rations diverses"),t.k0s(),t.j41(10,"option",12),t.EFF(11,"Salaires"),t.k0s(),t.j41(12,"option",13),t.EFF(13,"Caisses"),t.k0s(),t.j41(14,"option",14),t.EFF(15,"Monnaie \xe9lectronique"),t.k0s(),t.j41(16,"option",15),t.EFF(17,"Autre"),t.k0s()(),t.bVm()}if(2&i){const e=t.XpG(2);t.R7$(),t.R50("ngModel",e.editType)}}function j(i,s){if(1&i&&t.EFF(0),2&i){const e=t.XpG().$implicit;t.JRh(e.type)}}function k(i,s){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"button",16),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return t.Njj(r.saveEdit(n.code))}),t.EFF(2,"Enregistrer"),t.k0s(),t.j41(3,"button",16),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.cancelEdit())}),t.EFF(4,"Annuler"),t.k0s(),t.bVm()}}function J(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",16),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return t.Njj(r.startEdit(n))}),t.EFF(1,"Modifier"),t.k0s(),t.j41(2,"button",26),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return t.Njj(r.removeJournal(n.code))}),t.EFF(3,"Supprimer"),t.k0s()}}function x(i,s){if(1&i&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.DNE(4,F,2,1,"ng-container",25)(5,f,1,1,"ng-template",null,0,t.C5r),t.k0s(),t.j41(7,"td"),t.DNE(8,C,18,1,"ng-container",25)(9,j,1,1,"ng-template",null,1,t.C5r),t.k0s(),t.j41(11,"td"),t.DNE(12,k,5,0,"ng-container",25)(13,J,4,0,"ng-template",null,2,t.C5r),t.k0s()()),2&i){const e=s.$implicit,o=t.sdS(6),n=t.sdS(10),r=t.sdS(14),l=t.XpG();t.R7$(2),t.JRh(e.code),t.R7$(2),t.Y8G("ngIf",l.editing===e.code)("ngIfElse",o),t.R7$(4),t.Y8G("ngIf",l.editing===e.code)("ngIfElse",n),t.R7$(4),t.Y8G("ngIf",l.editing===e.code)("ngIfElse",r)}}function T(i,s){if(1&i&&(t.j41(0,"option",27),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e.code),t.R7$(),t.Lme("",e.code," - ",e.libelle,"")}}function R(i,s){if(1&i&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.EFF(14),t.k0s()()),2&i){const e=s.$implicit;t.R7$(2),t.JRh(e.id),t.R7$(2),t.JRh(e.date),t.R7$(2),t.JRh(e.journalCode),t.R7$(2),t.JRh(e.piece),t.R7$(2),t.JRh(e.reference),t.R7$(2),t.JRh(e.totalDebit),t.R7$(2),t.JRh(e.totalCredit)}}let h=(()=>{class i{transform(e,o){return o?e.filter(n=>n.journalCode===o):e}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275pipe=t.EJ8({name:"filterJournal",type:i,pure:!0,standalone:!0})}}return i})(),D=(()=>{class i{constructor(e){this.js=e,this.journaux=[],this.ecritures=[],this.newCode="",this.newLabel="",this.newType="AUTRE",this.selectedJournal="",this.editing=null,this.editLabel="",this.editType="AUTRE",this.err="",this.ok="",this.js.getJournaux().subscribe(o=>this.journaux=o),this.js.getEcritures().subscribe(o=>this.ecritures=o)}addJournal(){this.err=this.ok="";const e=(this.newCode||"").trim().toUpperCase(),o=(this.newLabel||"").trim(),n=this.newType;if(e&&o)if(/^[A-Z0-9_-]{2,10}$/.test(e))try{this.js.addJournal({code:e,libelle:o,type:n}),this.newCode=this.newLabel="",this.ok="Journal ajout\xe9"}catch(r){this.err=r?.message||"Erreur lors de l'ajout"}else this.err="Code invalide (2-10 caract\xe8res alphanum\xe9riques)";else this.err="Code et Libell\xe9 requis"}removeJournal(e){confirm(`Supprimer le journal ${e} ?`)&&this.js.removeJournal(e)}startEdit(e){this.editing=e.code,this.editLabel=e.libelle,this.editType=e.type}saveEdit(e){this.editing&&(this.js.updateJournal(e,{libelle:this.editLabel,type:this.editType}),this.ok="Journal mis \xe0 jour",this.cancelEdit())}cancelEdit(){this.editing=null,this.editLabel="",this.editType="AUTRE"}exportJournaux(){const e=this.js.exportJournauxCsv();this.download(e,"journaux.csv")}exportJournauxExcel(){const e=`\n      <html><head><meta charset="UTF-8"></head><body>\n      <table border="1"><thead><tr><th>Code</th><th>Libell\xe9</th><th>Type</th></tr></thead><tbody>\n      ${this.journaux.map(n=>`<tr><td>${n.code}</td><td>${u(n.libelle)}</td><td>${n.type}</td></tr>`).join("")}\n      </tbody></table></body></html>`,o=this.js.exportHtmlTableExcel(e);this.download(o,"journaux.xls")}exportJournauxPdf(){const e=window.open("","_blank");if(e){e.document.write('<html><head><meta charset="UTF-8"><title>Journaux</title></head><body>'),e.document.write("<h2>Journaux</h2><table border=1><thead><tr><th>Code</th><th>Libell\xe9</th><th>Type</th></tr></thead><tbody>");for(const o of this.journaux)e.document.write(`<tr><td>${o.code}</td><td>${u(o.libelle)}</td><td>${o.type}</td></tr>`);e.document.write("</tbody></table></body></html>"),e.document.close(),e.print()}}exportEcritures(){const e=this.js.exportEcrituresCsv(this.selectedJournal||void 0);this.download(e,"ecritures.csv")}exportEcrituresExcel(){const o=`\n      <html><head><meta charset="UTF-8"></head><body>\n      <table border="1"><thead><tr><th>ID</th><th>Date</th><th>Journal</th><th>Pi\xe8ce</th><th>R\xe9f</th><th>Total D\xe9bit</th><th>Total Cr\xe9dit</th></tr></thead><tbody>\n      ${this.ecritures.filter(r=>!this.selectedJournal||r.journalCode===this.selectedJournal).map(r=>`<tr><td>${r.id}</td><td>${r.date}</td><td>${r.journalCode}</td><td>${u(r.piece||"")}</td><td>${u(r.reference||"")}</td><td>${r.totalDebit}</td><td>${r.totalCredit}</td></tr>`).join("")}\n      </tbody></table></body></html>`,n=this.js.exportHtmlTableExcel(o);this.download(n,"ecritures.xls")}exportEcrituresPdf(){const e=this.ecritures.filter(n=>!this.selectedJournal||n.journalCode===this.selectedJournal),o=window.open("","_blank");if(o){o.document.write('<html><head><meta charset="UTF-8"><title>\xc9critures</title></head><body>'),o.document.write("<h2>\xc9critures</h2><table border=1><thead><tr><th>ID</th><th>Date</th><th>Journal</th><th>Pi\xe8ce</th><th>R\xe9f</th><th>Total D\xe9bit</th><th>Total Cr\xe9dit</th></tr></thead><tbody>");for(const n of e)o.document.write(`<tr><td>${n.id}</td><td>${n.date}</td><td>${n.journalCode}</td><td>${u(n.piece||"")}</td><td>${u(n.reference||"")}</td><td>${n.totalDebit}</td><td>${n.totalCredit}</td></tr>`);o.document.write("</tbody></table></body></html>"),o.document.close(),o.print()}}generateDemoData(){this.err=this.ok="";const e=new Date,o=d=>d.toISOString().slice(0,10),n=d=>new Date(e.getFullYear(),e.getMonth(),e.getDate()-d),r=[],l=n(30);r.push({date:o(l),journalCode:"VEN",piece:"FAC-001",reference:"Vente produits",lignes:[{compte:"411",libelle:"Client X",debit:118e3,credit:0},{compte:"701",libelle:"Vente",debit:0,credit:1e5},{compte:"4457",libelle:"TVA collect\xe9e",debit:0,credit:18e3}]});const w=n(25);r.push({date:o(w),journalCode:"BNK",piece:"REC-001",reference:"R\xe8glement client X",lignes:[{compte:"512",libelle:"Banque",debit:118e3,credit:0},{compte:"411",libelle:"Client X",debit:0,credit:118e3}]});const M=n(20);r.push({date:o(M),journalCode:"ACH",piece:"ACH-001",reference:"Achat marchandises",lignes:[{compte:"607",libelle:"Achats",debit:5e4,credit:0},{compte:"44566",libelle:"TVA d\xe9ductible",debit:9e3,credit:0},{compte:"401",libelle:"Fournisseur Y",debit:0,credit:59e3}]});const y=n(15);r.push({date:o(y),journalCode:"BNK",piece:"PAI-001",reference:"Paiement fournisseur Y",lignes:[{compte:"401",libelle:"Fournisseur Y",debit:59e3,credit:0},{compte:"512",libelle:"Banque",debit:0,credit:59e3}]});const I=n(10);r.push({date:o(I),journalCode:"SAL",piece:"PAY-001",reference:"Salaire mois",lignes:[{compte:"641",libelle:"Charges salaires",debit:8e4,credit:0},{compte:"421",libelle:"R\xe9mun\xe9rations dues",debit:0,credit:8e4}]});const $=n(7);r.push({date:o($),journalCode:"BNK",piece:"VIR-001",reference:"Virement salaires",lignes:[{compte:"421",libelle:"R\xe9mun\xe9rations dues",debit:8e4,credit:0},{compte:"512",libelle:"Banque",debit:0,credit:8e4}]});const v=n(5);r.push({date:o(v),journalCode:"OD",piece:"AMO-001",reference:"Dotations amortissements",lignes:[{compte:"6811",libelle:"Dotations",debit:1e4,credit:0},{compte:"281",libelle:"Amortissements",debit:0,credit:1e4}]});try{for(const d of r)this.js.addEcriture(d);this.ok="Donn\xe9es de d\xe9monstration g\xe9n\xe9r\xe9es"}catch(d){this.err=d?.message||"Erreur lors de la g\xe9n\xe9ration"}}download(e,o){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=o,r.click(),URL.revokeObjectURL(n)}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(b.p))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-journals"]],standalone:!0,features:[t.aNF],decls:81,vars:12,consts:[["viewLabel",""],["viewType",""],["actionsView",""],[1,"module-container"],[1,"toolbar"],["placeholder","Code (ex: SAL)",1,"input",3,"ngModelChange","ngModel"],["placeholder","Libell\xe9",1,"input",3,"ngModelChange","ngModel"],[1,"input",3,"ngModelChange","ngModel"],["value","ACHATS"],["value","VENTES"],["value","BANQUE"],["value","OD"],["value","SALAIRES"],["value","CAISSES"],["value","MONNAIE_ELECTRONIQUE"],["value","AUTRE"],[1,"btn",3,"click"],["class","err",4,"ngIf"],["class","ok",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"err"],[1,"ok"],[4,"ngIf","ngIfElse"],[1,"btn","danger",3,"click"],[3,"value"]],template:function(o,n){1&o&&(t.j41(0,"div",3)(1,"h1"),t.EFF(2,"\u{1f4d3} Journaux"),t.k0s(),t.j41(3,"div",4)(4,"input",5),t.mxI("ngModelChange",function(l){return t.DH7(n.newCode,l)||(n.newCode=l),l}),t.k0s(),t.j41(5,"input",6),t.mxI("ngModelChange",function(l){return t.DH7(n.newLabel,l)||(n.newLabel=l),l}),t.k0s(),t.j41(6,"select",7),t.mxI("ngModelChange",function(l){return t.DH7(n.newType,l)||(n.newType=l),l}),t.j41(7,"option",8),t.EFF(8,"Achats"),t.k0s(),t.j41(9,"option",9),t.EFF(10,"Ventes"),t.k0s(),t.j41(11,"option",10),t.EFF(12,"Banque"),t.k0s(),t.j41(13,"option",11),t.EFF(14,"Op\xe9rations diverses"),t.k0s(),t.j41(15,"option",12),t.EFF(16,"Salaires"),t.k0s(),t.j41(17,"option",13),t.EFF(18,"Caisses"),t.k0s(),t.j41(19,"option",14),t.EFF(20,"Monnaie \xe9lectronique"),t.k0s(),t.j41(21,"option",15),t.EFF(22,"Autre"),t.k0s()(),t.j41(23,"button",16),t.bIt("click",function(){return n.addJournal()}),t.EFF(24,"Ajouter"),t.k0s(),t.j41(25,"button",16),t.bIt("click",function(){return n.exportJournaux()}),t.EFF(26,"Export CSV Journaux"),t.k0s(),t.j41(27,"button",16),t.bIt("click",function(){return n.exportJournauxExcel()}),t.EFF(28,"Export Excel"),t.k0s(),t.j41(29,"button",16),t.bIt("click",function(){return n.exportJournauxPdf()}),t.EFF(30,"Export PDF"),t.k0s(),t.j41(31,"button",16),t.bIt("click",function(){return n.generateDemoData()}),t.EFF(32,"G\xe9n\xe9rer donn\xe9es d\xe9mo"),t.k0s()(),t.DNE(33,E,2,1,"div",17)(34,g,2,1,"div",18),t.j41(35,"table",19)(36,"thead")(37,"tr")(38,"th"),t.EFF(39,"Code"),t.k0s(),t.j41(40,"th"),t.EFF(41,"Libell\xe9"),t.k0s(),t.j41(42,"th"),t.EFF(43,"Type"),t.k0s(),t.j41(44,"th"),t.EFF(45,"Actions"),t.k0s()()(),t.j41(46,"tbody"),t.DNE(47,x,15,7,"tr",20),t.k0s()(),t.j41(48,"h2"),t.EFF(49,"\xc9critures par journal"),t.k0s(),t.j41(50,"div",4)(51,"select",7),t.mxI("ngModelChange",function(l){return t.DH7(n.selectedJournal,l)||(n.selectedJournal=l),l}),t.j41(52,"option",21),t.EFF(53,"Tous"),t.k0s(),t.DNE(54,T,2,3,"option",22),t.k0s(),t.j41(55,"button",16),t.bIt("click",function(){return n.exportEcritures()}),t.EFF(56,"Export CSV \xc9critures"),t.k0s(),t.j41(57,"button",16),t.bIt("click",function(){return n.exportEcrituresExcel()}),t.EFF(58,"Export Excel"),t.k0s(),t.j41(59,"button",16),t.bIt("click",function(){return n.exportEcrituresPdf()}),t.EFF(60,"Export PDF"),t.k0s()(),t.j41(61,"table",19)(62,"thead")(63,"tr")(64,"th"),t.EFF(65,"ID"),t.k0s(),t.j41(66,"th"),t.EFF(67,"Date"),t.k0s(),t.j41(68,"th"),t.EFF(69,"Journal"),t.k0s(),t.j41(70,"th"),t.EFF(71,"Pi\xe8ce"),t.k0s(),t.j41(72,"th"),t.EFF(73,"R\xe9f"),t.k0s(),t.j41(74,"th"),t.EFF(75,"Total D\xe9bit"),t.k0s(),t.j41(76,"th"),t.EFF(77,"Total Cr\xe9dit"),t.k0s()()(),t.j41(78,"tbody"),t.DNE(79,R,15,7,"tr",20),t.nI1(80,"filterJournal"),t.k0s()()()),2&o&&(t.R7$(4),t.R50("ngModel",n.newCode),t.R7$(),t.R50("ngModel",n.newLabel),t.R7$(),t.R50("ngModel",n.newType),t.R7$(27),t.Y8G("ngIf",n.err),t.R7$(),t.Y8G("ngIf",n.ok),t.R7$(13),t.Y8G("ngForOf",n.journaux),t.R7$(4),t.R50("ngModel",n.selectedJournal),t.R7$(3),t.Y8G("ngForOf",n.journaux),t.R7$(25),t.Y8G("ngForOf",t.i5U(80,9,n.ecritures,n.selectedJournal)))},dependencies:[p.MD,p.Sq,p.bT,c.YN,c.xH,c.y7,c.me,c.wz,c.BC,c.vS,h],styles:[".module-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:16px;box-shadow:0 4px 16px #00000014}.toolbar[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap;margin-bottom:8px}.input[_ngcontent-%COMP%]{padding:8px 10px;border:1px solid #e2e8f0;border-radius:6px}.btn[_ngcontent-%COMP%]{padding:8px 10px;border:none;border-radius:6px;background:#3182ce;color:#fff;cursor:pointer}.btn.danger[_ngcontent-%COMP%]{background:#e53e3e}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #e2e8f0;padding:8px 10px;text-align:left}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f7fafc}.err[_ngcontent-%COMP%]{color:#e53e3e;margin-bottom:8px}.ok[_ngcontent-%COMP%]{color:#38a169;margin-bottom:8px}"]})}}return i})();function u(i){return i.replace(/[&<>"]/g,s=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"}[s]))}},5312:(m,_,a)=>{a.d(_,{c:()=>p});const p={production:!1,name:"development",amplify:{region:"us-west-2",apiUrl:"https://dev-api.e-compta-ia.com",cognitoDomain:"dev-auth.e-compta-ia.com"},apiUrl:"https://e-compta-ia-backend.dev",app:{name:"E-COMPTA-IA",version:"1.0.0",description:"Plateforme Comptable SYSCOHADA avec IA"}}}}]);