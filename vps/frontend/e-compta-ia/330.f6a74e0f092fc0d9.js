"use strict";(self.webpackChunke_compta_ia=self.webpackChunke_compta_ia||[]).push([[330],{1167:(k,d,i)=>{i.r(d),i.d(d,{FinancialStatementsComponent:()=>R});var p=i(177),m=i(4341),t=i(4438),C=i(1941);function j(c,M){if(1&c&&(t.j41(0,"div",6)(1,"h3"),t.EFF(2,"Compte de R\xe9sultat"),t.k0s(),t.j41(3,"table",7)(4,"tbody")(5,"tr")(6,"td"),t.EFF(7,"Total Produits (classe 7)"),t.k0s(),t.j41(8,"td"),t.EFF(9),t.nI1(10,"number"),t.k0s()(),t.j41(11,"tr")(12,"td"),t.EFF(13,"Total Charges (classe 6)"),t.k0s(),t.j41(14,"td"),t.EFF(15),t.nI1(16,"number"),t.k0s()(),t.j41(17,"tr")(18,"th"),t.EFF(19,"R\xe9sultat Net"),t.k0s(),t.j41(20,"th"),t.EFF(21),t.nI1(22,"number"),t.k0s()()()(),t.j41(23,"h3"),t.EFF(24,"Bilan simplifi\xe9"),t.k0s(),t.j41(25,"table",7)(26,"thead")(27,"tr")(28,"th"),t.EFF(29,"Actif"),t.k0s(),t.j41(30,"th"),t.EFF(31,"Montant"),t.k0s(),t.j41(32,"th"),t.EFF(33,"Passif"),t.k0s(),t.j41(34,"th"),t.EFF(35,"Montant"),t.k0s()()(),t.j41(36,"tbody")(37,"tr")(38,"td"),t.EFF(39,"Immobilisations (classe 2)"),t.k0s(),t.j41(40,"td"),t.EFF(41),t.nI1(42,"number"),t.k0s(),t.j41(43,"td"),t.EFF(44,"Capitaux & Passifs LT (classe 1)"),t.k0s(),t.j41(45,"td"),t.EFF(46),t.nI1(47,"number"),t.k0s()(),t.j41(48,"tr")(49,"td"),t.EFF(50,"Stocks (classe 3)"),t.k0s(),t.j41(51,"td"),t.EFF(52),t.nI1(53,"number"),t.k0s(),t.j41(54,"td"),t.EFF(55,"Tiers (classe 4)"),t.k0s(),t.j41(56,"td"),t.EFF(57),t.nI1(58,"number"),t.k0s()(),t.j41(59,"tr")(60,"td"),t.EFF(61,"Tr\xe9sorerie (classe 5)"),t.k0s(),t.j41(62,"td"),t.EFF(63),t.nI1(64,"number"),t.k0s(),t.j41(65,"td"),t.EFF(66,"R\xe9sultat (CR)"),t.k0s(),t.j41(67,"td"),t.EFF(68),t.nI1(69,"number"),t.k0s()(),t.j41(70,"tr")(71,"th"),t.EFF(72,"Total Actif"),t.k0s(),t.j41(73,"th"),t.EFF(74),t.nI1(75,"number"),t.k0s(),t.j41(76,"th"),t.EFF(77,"Total Passif"),t.k0s(),t.j41(78,"th"),t.EFF(79),t.nI1(80,"number"),t.k0s()()()(),t.j41(81,"h3"),t.EFF(82,"KPI"),t.k0s(),t.j41(83,"div",8),t.EFF(84,"Marge nette = R\xe9sultat / Produits"),t.k0s(),t.j41(85,"ul")(86,"li"),t.EFF(87,"Marge nette: "),t.j41(88,"b"),t.EFF(89),t.nI1(90,"number"),t.k0s()(),t.j41(91,"li"),t.EFF(92,"Charges/Produits: "),t.j41(93,"b"),t.EFF(94),t.nI1(95,"number"),t.k0s()()()()),2&c){const e=t.XpG();t.R7$(9),t.JRh(t.i5U(10,13,e.produits,"1.2-2")),t.R7$(6),t.JRh(t.i5U(16,16,e.charges,"1.2-2")),t.R7$(6),t.JRh(t.i5U(22,19,e.resultat,"1.2-2")),t.R7$(20),t.JRh(t.i5U(42,22,e.act_imm,"1.2-2")),t.R7$(5),t.JRh(t.i5U(47,25,e.pas_cap,"1.2-2")),t.R7$(6),t.JRh(t.i5U(53,28,e.act_sto,"1.2-2")),t.R7$(5),t.JRh(t.i5U(58,31,e.pas_tiers,"1.2-2")),t.R7$(6),t.JRh(t.i5U(64,34,e.act_tres,"1.2-2")),t.R7$(5),t.JRh(t.i5U(69,37,e.resultat,"1.2-2")),t.R7$(6),t.JRh(t.i5U(75,40,e.act_imm+e.act_sto+e.act_tres,"1.2-2")),t.R7$(5),t.JRh(t.i5U(80,43,e.pas_cap+e.pas_tiers+e.resultat,"1.2-2")),t.R7$(10),t.SpI("",t.i5U(90,46,e.produits?e.resultat/e.produits*100:0,"1.2-2"),"%"),t.R7$(5),t.SpI("",t.i5U(95,49,e.produits?e.charges/e.produits*100:0,"1.2-2"),"%")}}let R=(()=>{class c{constructor(e){this.js=e,this.from=new Date((new Date).getFullYear(),0,1).toISOString().slice(0,10),this.to=(new Date).toISOString().slice(0,10),this.computed=!1,this.produits=0,this.charges=0,this.resultat=0,this.act_imm=0,this.act_sto=0,this.act_tres=0,this.pas_cap=0,this.pas_tiers=0}compute(){const e=this.js.ecritures$?.value||[],o=u=>u>=this.from&&u<=this.to;let s=0,a=0,n=0,F=0,b=0,E=0,f=0;const g=new Map;for(const u of e)if(o(u.date))for(const _ of u.lignes){const h=String(_.compte||"");if(!h)continue;const r=(Number(_.debit)||0)-(Number(_.credit)||0),l=h[0];"7"===l?s+=-r:"6"===l?a+=r:"1"===l?n+=-r:"2"===l?F+=r:"3"===l?b+=r:"4"===l?E+=r:"5"===l&&(f+=r);const I=g.get(h)||0;g.set(h,I+r)}this.produits=s,this.charges=a,this.resultat=s-a,this.act_imm=F,this.act_sto=b,this.act_tres=f,this.pas_cap=n,this.pas_tiers=-E,this.computed=!0}exportCsv(){const o=[["CR","Produits",this.produits],["CR","Charges",this.charges],["CR","R\xe9sultat",this.resultat],["BILAN","Immobilisations",this.act_imm],["BILAN","Stocks",this.act_sto],["BILAN","Tr\xe9sorerie",this.act_tres],["BILAN","Capitaux/Passifs LT",this.pas_cap],["BILAN","Tiers (net)",this.pas_tiers]].map(F=>F.join(";")),s=new Blob(["\ufeff"+["section;intitul\xe9;montant",...o].join("\n")],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(s),n=document.createElement("a");n.href=a,n.download="etats-financiers.csv",n.click(),URL.revokeObjectURL(a)}static{this.\u0275fac=function(o){return new(o||c)(t.rXU(C.p))}}static{this.\u0275cmp=t.VBU({type:c,selectors:[["app-financial-statements"]],standalone:!0,features:[t.aNF],decls:15,vars:4,consts:[[1,"module-container"],[1,"toolbar"],["type","date",1,"input",3,"ngModelChange","ngModel"],[1,"btn",3,"click"],[1,"btn",3,"click","disabled"],["class","panel",4,"ngIf"],[1,"panel"],[1,"table"],[1,"help"]],template:function(o,s){1&o&&(t.j41(0,"div",0)(1,"h1"),t.EFF(2,"\u{1f4c8} \xc9tats Financiers"),t.k0s(),t.j41(3,"div",1)(4,"label"),t.EFF(5,"Du "),t.j41(6,"input",2),t.mxI("ngModelChange",function(n){return t.DH7(s.from,n)||(s.from=n),n}),t.k0s()(),t.j41(7,"label"),t.EFF(8,"Au "),t.j41(9,"input",2),t.mxI("ngModelChange",function(n){return t.DH7(s.to,n)||(s.to=n),n}),t.k0s()(),t.j41(10,"button",3),t.bIt("click",function(){return s.compute()}),t.EFF(11,"Calculer"),t.k0s(),t.j41(12,"button",4),t.bIt("click",function(){return s.exportCsv()}),t.EFF(13,"Export CSV"),t.k0s()(),t.DNE(14,j,96,52,"div",5),t.k0s()),2&o&&(t.R7$(6),t.R50("ngModel",s.from),t.R7$(3),t.R50("ngModel",s.to),t.R7$(3),t.Y8G("disabled",!s.computed),t.R7$(2),t.Y8G("ngIf",s.computed))},dependencies:[p.MD,p.bT,p.QX,m.YN,m.me,m.BC,m.vS],styles:[".module-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:16px;box-shadow:0 4px 16px #00000014}.toolbar[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;margin-bottom:8px}.input[_ngcontent-%COMP%]{padding:8px 10px;border:1px solid #e2e8f0;border-radius:6px}.btn[_ngcontent-%COMP%]{padding:8px 10px;border:none;border-radius:6px;background:#3182ce;color:#fff;cursor:pointer}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #e2e8f0;padding:8px 10px;text-align:left}.panel[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;padding:12px}.help[_ngcontent-%COMP%]{color:#4a5568;margin:6px 0}"]})}}return c})()},5312:(k,d,i)=>{i.d(d,{c:()=>p});const p={production:!1,name:"development",amplify:{region:"us-west-2",apiUrl:"https://dev-api.e-compta-ia.com",cognitoDomain:"dev-auth.e-compta-ia.com"},apiUrl:"https://e-compta-ia-backend.dev",app:{name:"E-COMPTA-IA",version:"1.0.0",description:"Plateforme Comptable SYSCOHADA avec IA"}}}}]);