"use strict";(self.webpackChunke_compta_ia=self.webpackChunke_compta_ia||[]).push([[49],{8049:(I,u,_)=>{_.r(u),_.d(u,{EnterpriseComponent:()=>y});var g=_(467),p=_(177),a=_(4341),e=_(4438),m=_(4913);function h(o,s){if(1&o&&(e.j41(0,"option",18),e.EFF(1),e.k0s()),2&o){const n=s.$implicit;e.Y8G("value",n.code),e.R7$(),e.JRh(n.name)}}function j(o,s){if(1&o&&(e.j41(0,"div"),e.nrm(1,"img",19),e.k0s()),2&o){const n=e.XpG(2);e.R7$(),e.Y8G("src",n.identity.logoDataUrl,e.B4B)}}function E(o,s){if(1&o){const n=e.RV6();e.qex(0),e.j41(1,"label"),e.EFF(2,"Banque"),e.j41(3,"input",6),e.mxI("ngModelChange",function(t){const i=e.eBV(n).$implicit;return e.DH7(i.bankName,t)||(i.bankName=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(4,"label"),e.EFF(5,"Compte"),e.j41(6,"input",6),e.mxI("ngModelChange",function(t){const i=e.eBV(n).$implicit;return e.DH7(i.account,t)||(i.account=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(7,"label"),e.EFF(8,"BIC"),e.j41(9,"input",6),e.mxI("ngModelChange",function(t){const i=e.eBV(n).$implicit;return e.DH7(i.bic,t)||(i.bic=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(10,"button",20),e.bIt("click",function(){const t=e.eBV(n).index,i=e.XpG(2);return e.Njj(i.removeBank(t))}),e.EFF(11,"Supprimer"),e.k0s(),e.bVm()}if(2&o){const n=s.$implicit;e.R7$(3),e.R50("ngModel",n.bankName),e.R7$(3),e.R50("ngModel",n.account),e.R7$(3),e.R50("ngModel",n.bic)}}function C(o,s){if(1&o){const n=e.RV6();e.j41(0,"div",4)(1,"h3"),e.EFF(2,"Informations l\xe9gales"),e.k0s(),e.j41(3,"div",5)(4,"label"),e.EFF(5,"D\xe9nomination"),e.j41(6,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.name,t)||(i.identity.name=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(7,"label"),e.EFF(8,"Forme juridique"),e.j41(9,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.legalForm,t)||(i.identity.legalForm=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(10,"label"),e.EFF(11,"RCCM/Registre"),e.j41(12,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.registrationNumber,t)||(i.identity.registrationNumber=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(13,"label"),e.EFF(14,"Num\xe9ro social"),e.j41(15,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.socialNumber,t)||(i.identity.socialNumber=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(16,"label"),e.EFF(17,"NIF/IFU"),e.j41(18,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.taxId,t)||(i.identity.taxId=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(19,"label"),e.EFF(20,"Activit\xe9"),e.j41(21,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.activity,t)||(i.identity.activity=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(22,"label"),e.EFF(23,"Capital"),e.j41(24,"input",7),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.capital,t)||(i.identity.capital=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(25,"label"),e.EFF(26,"Pays "),e.j41(27,"select",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.settings.app.country,t)||(i.settings.app.country=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.onCountryChange())}),e.j41(28,"option",8),e.EFF(29,"\u2014"),e.k0s(),e.DNE(30,h,2,2,"option",9),e.k0s()(),e.j41(31,"label"),e.EFF(32,"Devise"),e.nrm(33,"input",10),e.k0s(),e.j41(34,"label"),e.EFF(35,"Langue/Locale"),e.nrm(36,"input",10),e.k0s(),e.j41(37,"label"),e.EFF(38,"Syst\xe8me comptable"),e.nrm(39,"input",10),e.k0s(),e.j41(40,"label"),e.EFF(41,"Plan comptable"),e.nrm(42,"input",10),e.k0s(),e.j41(43,"label"),e.EFF(44,"Ville"),e.j41(45,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.city,t)||(i.identity.city=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(46,"label"),e.EFF(47,"Adresse"),e.j41(48,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.address,t)||(i.identity.address=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(49,"label"),e.EFF(50,"Email"),e.j41(51,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.email,t)||(i.identity.email=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(52,"label"),e.EFF(53,"T\xe9l\xe9phone"),e.j41(54,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.phone,t)||(i.identity.phone=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(55,"label"),e.EFF(56,"Site web"),e.j41(57,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.website,t)||(i.identity.website=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(58,"label"),e.EFF(59,"D\xe9but exercice (date)"),e.j41(60,"input",11),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.fiscalYearStartDate,t)||(i.identity.fiscalYearStartDate=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(61,"label"),e.EFF(62,"Fin exercice (date)"),e.j41(63,"input",11),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.fiscalYearEndDate,t)||(i.identity.fiscalYearEndDate=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(64,"label"),e.EFF(65,"D\xe9but exercice (mois 1..12)"),e.j41(66,"input",12),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.fiscalYearStartMonth,t)||(i.identity.fiscalYearStartMonth=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(67,"label"),e.EFF(68,"Dirigeant"),e.j41(69,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.identity.director,t)||(i.identity.director=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveIdentity())}),e.k0s()(),e.j41(70,"label"),e.EFF(71,"Logo "),e.j41(72,"input",13),e.bIt("change",function(t){e.eBV(n);const i=e.XpG();return e.Njj(i.onLogo(t))}),e.k0s()(),e.DNE(73,j,2,1,"div",14),e.k0s(),e.j41(74,"h4"),e.EFF(75,"Banques"),e.k0s(),e.j41(76,"div",5),e.DNE(77,E,12,3,"ng-container",15),e.k0s(),e.j41(78,"div",16)(79,"button",17),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.addBank())}),e.EFF(80,"Ajouter une banque"),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(6),e.R50("ngModel",n.identity.name),e.R7$(3),e.R50("ngModel",n.identity.legalForm),e.R7$(3),e.R50("ngModel",n.identity.registrationNumber),e.R7$(3),e.R50("ngModel",n.identity.socialNumber),e.R7$(3),e.R50("ngModel",n.identity.taxId),e.R7$(3),e.R50("ngModel",n.identity.activity),e.R7$(3),e.R50("ngModel",n.identity.capital),e.R7$(3),e.R50("ngModel",n.settings.app.country),e.R7$(3),e.Y8G("ngForOf",n.countries),e.R7$(3),e.Y8G("value",n.settings.app.defaultCurrency),e.R7$(3),e.Y8G("value",n.settings.app.locale),e.R7$(3),e.Y8G("value",n.settings.app.accountingSystem),e.R7$(3),e.Y8G("value",n.settings.app.chartOfAccounts),e.R7$(3),e.R50("ngModel",n.identity.city),e.R7$(3),e.R50("ngModel",n.identity.address),e.R7$(3),e.R50("ngModel",n.identity.email),e.R7$(3),e.R50("ngModel",n.identity.phone),e.R7$(3),e.R50("ngModel",n.identity.website),e.R7$(3),e.R50("ngModel",n.identity.fiscalYearStartDate),e.R7$(3),e.R50("ngModel",n.identity.fiscalYearEndDate),e.R7$(3),e.R50("ngModel",n.identity.fiscalYearStartMonth),e.R7$(3),e.R50("ngModel",n.identity.director),e.R7$(4),e.Y8G("ngIf",n.identity.logoDataUrl),e.R7$(4),e.Y8G("ngForOf",n.identity.banks)}}function F(o,s){if(1&o){const n=e.RV6();e.j41(0,"div",4)(1,"h3"),e.EFF(2,"Param\xe9trages plateformes"),e.k0s(),e.j41(3,"h4"),e.EFF(4,"Portail fiscal"),e.k0s(),e.j41(5,"div",5)(6,"label"),e.EFF(7,"API Base"),e.j41(8,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.settings.fiscal.apiBase,t)||(i.settings.fiscal.apiBase=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveSettings())}),e.k0s()(),e.j41(9,"label"),e.EFF(10,"Client ID"),e.j41(11,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.settings.fiscal.clientId,t)||(i.settings.fiscal.clientId=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveSettings())}),e.k0s()(),e.j41(12,"label"),e.EFF(13,"Client Secret"),e.j41(14,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.settings.fiscal.clientSecret,t)||(i.settings.fiscal.clientSecret=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveSettings())}),e.k0s()(),e.j41(15,"label"),e.EFF(16,"Token"),e.j41(17,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.settings.fiscal.token,t)||(i.settings.fiscal.token=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveSettings())}),e.k0s()(),e.j41(18,"label"),e.EFF(19,"Environnement "),e.j41(20,"select",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.settings.fiscal.environment,t)||(i.settings.fiscal.environment=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveSettings())}),e.j41(21,"option",8),e.EFF(22,"\u2014"),e.k0s(),e.j41(23,"option",21),e.EFF(24,"Sandbox"),e.k0s(),e.j41(25,"option",22),e.EFF(26,"Production"),e.k0s()()()(),e.j41(27,"h4"),e.EFF(28,"Portail social (CNSS)"),e.k0s(),e.j41(29,"div",5)(30,"label"),e.EFF(31,"API Base"),e.j41(32,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.settings.social.apiBase,t)||(i.settings.social.apiBase=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveSettings())}),e.k0s()(),e.j41(33,"label"),e.EFF(34,"Client ID"),e.j41(35,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.settings.social.clientId,t)||(i.settings.social.clientId=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveSettings())}),e.k0s()(),e.j41(36,"label"),e.EFF(37,"Client Secret"),e.j41(38,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.settings.social.clientSecret,t)||(i.settings.social.clientSecret=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveSettings())}),e.k0s()(),e.j41(39,"label"),e.EFF(40,"Token"),e.j41(41,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.settings.social.token,t)||(i.settings.social.token=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveSettings())}),e.k0s()(),e.j41(42,"label"),e.EFF(43,"Environnement "),e.j41(44,"select",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.settings.social.environment,t)||(i.settings.social.environment=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveSettings())}),e.j41(45,"option",8),e.EFF(46,"\u2014"),e.k0s(),e.j41(47,"option",21),e.EFF(48,"Sandbox"),e.k0s(),e.j41(49,"option",22),e.EFF(50,"Production"),e.k0s()()()(),e.j41(51,"h4"),e.EFF(52,"Application"),e.k0s(),e.j41(53,"div",5)(54,"label"),e.EFF(55,"Journal par d\xe9faut"),e.j41(56,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.settings.app.defaultJournal,t)||(i.settings.app.defaultJournal=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveSettings())}),e.k0s()(),e.j41(57,"label"),e.EFF(58,"Devise par d\xe9faut"),e.j41(59,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.settings.app.defaultCurrency,t)||(i.settings.app.defaultCurrency=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveSettings())}),e.k0s()(),e.j41(60,"label"),e.EFF(61,"Langue/Locale"),e.j41(62,"input",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.settings.app.locale,t)||(i.settings.app.locale=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveSettings())}),e.k0s()()()()}if(2&o){const n=e.XpG();e.R7$(8),e.R50("ngModel",n.settings.fiscal.apiBase),e.R7$(3),e.R50("ngModel",n.settings.fiscal.clientId),e.R7$(3),e.R50("ngModel",n.settings.fiscal.clientSecret),e.R7$(3),e.R50("ngModel",n.settings.fiscal.token),e.R7$(3),e.R50("ngModel",n.settings.fiscal.environment),e.R7$(12),e.R50("ngModel",n.settings.social.apiBase),e.R7$(3),e.R50("ngModel",n.settings.social.clientId),e.R7$(3),e.R50("ngModel",n.settings.social.clientSecret),e.R7$(3),e.R50("ngModel",n.settings.social.token),e.R7$(3),e.R50("ngModel",n.settings.social.environment),e.R7$(12),e.R50("ngModel",n.settings.app.defaultJournal),e.R7$(3),e.R50("ngModel",n.settings.app.defaultCurrency),e.R7$(3),e.R50("ngModel",n.settings.app.locale)}}function x(o,s){if(1&o){const n=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"select",6),e.mxI("ngModelChange",function(t){const i=e.eBV(n).$implicit;return e.DH7(i.role,t)||(i.role=t),e.Njj(t)}),e.bIt("change",function(){const t=e.eBV(n).$implicit,i=e.XpG(2);return e.Njj(i.updateUser(t,{role:t.role,rights:i.templateFor(t.role)}))}),e.j41(7,"option",26),e.EFF(8,"Admin"),e.k0s(),e.j41(9,"option",27),e.EFF(10,"Comptable"),e.k0s(),e.j41(11,"option",28),e.EFF(12,"Valideur"),e.k0s(),e.j41(13,"option",29),e.EFF(14,"Lecture"),e.k0s(),e.j41(15,"option",30),e.EFF(16,"Personnalis\xe9"),e.k0s()()(),e.j41(17,"td")(18,"input",34),e.mxI("ngModelChange",function(t){const i=e.eBV(n).$implicit;return e.DH7(i.active,t)||(i.active=t),e.Njj(t)}),e.bIt("change",function(){const t=e.eBV(n).$implicit,i=e.XpG(2);return e.Njj(i.updateUser(t,{active:t.active}))}),e.k0s()(),e.j41(19,"td")(20,"small"),e.EFF(21),e.k0s()(),e.j41(22,"td")(23,"button",20),e.bIt("click",function(){const t=e.eBV(n).$implicit,i=e.XpG(2);return e.Njj(i.removeUser(t))}),e.EFF(24,"Supprimer"),e.k0s()()()}if(2&o){const n=s.$implicit;e.R7$(2),e.JRh(n.name),e.R7$(2),e.JRh(n.email),e.R7$(2),e.R50("ngModel",n.role),e.R7$(12),e.R50("ngModel",n.active),e.R7$(3),e.ZXR(" ",n.rights.canView?"L":"-"," ",n.rights.canEditEntries?"E":"-"," ",n.rights.canSubmitDeclarations?"S":"-"," ",n.rights.canImportExport?"X":"-"," ",n.rights.canManageUsers?"U":"-"," ",n.rights.canConfigure?"C":"-"," ")}}function f(o,s){if(1&o){const n=e.RV6();e.j41(0,"div",4)(1,"h3"),e.EFF(2,"Utilisateurs"),e.k0s(),e.j41(3,"div",16)(4,"input",23),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.newUser.name,t)||(i.newUser.name=t),e.Njj(t)}),e.k0s(),e.j41(5,"input",24),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.newUser.email,t)||(i.newUser.email=t),e.Njj(t)}),e.k0s(),e.j41(6,"input",25),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.newUser.phone,t)||(i.newUser.phone=t),e.Njj(t)}),e.k0s(),e.j41(7,"select",6),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.newUser.role,t)||(i.newUser.role=t),e.Njj(t)}),e.bIt("change",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.applyRoleTemplate())}),e.j41(8,"option",26),e.EFF(9,"Admin"),e.k0s(),e.j41(10,"option",27),e.EFF(11,"Comptable"),e.k0s(),e.j41(12,"option",28),e.EFF(13,"Valideur"),e.k0s(),e.j41(14,"option",29),e.EFF(15,"Lecture"),e.k0s(),e.j41(16,"option",30),e.EFF(17,"Personnalis\xe9"),e.k0s()(),e.j41(18,"button",17),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.addUser())}),e.EFF(19,"Ajouter"),e.k0s()(),e.j41(20,"div",31)(21,"label")(22,"input",32),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.newUser.rights.canView,t)||(i.newUser.rights.canView=t),e.Njj(t)}),e.k0s(),e.EFF(23," Lecture"),e.k0s(),e.j41(24,"label")(25,"input",32),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.newUser.rights.canEditEntries,t)||(i.newUser.rights.canEditEntries=t),e.Njj(t)}),e.k0s(),e.EFF(26," \xc9crire des \xe9critures"),e.k0s(),e.j41(27,"label")(28,"input",32),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.newUser.rights.canSubmitDeclarations,t)||(i.newUser.rights.canSubmitDeclarations=t),e.Njj(t)}),e.k0s(),e.EFF(29," Soumettre d\xe9clarations"),e.k0s(),e.j41(30,"label")(31,"input",32),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.newUser.rights.canImportExport,t)||(i.newUser.rights.canImportExport=t),e.Njj(t)}),e.k0s(),e.EFF(32," Import/Export"),e.k0s(),e.j41(33,"label")(34,"input",32),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.newUser.rights.canManageUsers,t)||(i.newUser.rights.canManageUsers=t),e.Njj(t)}),e.k0s(),e.EFF(35," G\xe9rer utilisateurs"),e.k0s(),e.j41(36,"label")(37,"input",32),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.newUser.rights.canConfigure,t)||(i.newUser.rights.canConfigure=t),e.Njj(t)}),e.k0s(),e.EFF(38," Configurer"),e.k0s()(),e.j41(39,"table",33)(40,"thead")(41,"tr")(42,"th"),e.EFF(43,"Nom"),e.k0s(),e.j41(44,"th"),e.EFF(45,"Email"),e.k0s(),e.j41(46,"th"),e.EFF(47,"R\xf4le"),e.k0s(),e.j41(48,"th"),e.EFF(49,"Actif"),e.k0s(),e.j41(50,"th"),e.EFF(51,"Droits"),e.k0s(),e.j41(52,"th"),e.EFF(53,"Actions"),e.k0s()()(),e.j41(54,"tbody"),e.DNE(55,x,25,10,"tr",15),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(4),e.R50("ngModel",n.newUser.name),e.R7$(),e.R50("ngModel",n.newUser.email),e.R7$(),e.R50("ngModel",n.newUser.phone),e.R7$(),e.R50("ngModel",n.newUser.role),e.R7$(15),e.R50("ngModel",n.newUser.rights.canView),e.R7$(3),e.R50("ngModel",n.newUser.rights.canEditEntries),e.R7$(3),e.R50("ngModel",n.newUser.rights.canSubmitDeclarations),e.R7$(3),e.R50("ngModel",n.newUser.rights.canImportExport),e.R7$(3),e.R50("ngModel",n.newUser.rights.canManageUsers),e.R7$(3),e.R50("ngModel",n.newUser.rights.canConfigure),e.R7$(18),e.Y8G("ngForOf",n.users)}}function b(o,s){if(1&o){const n=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td")(16,"button",20),e.bIt("click",function(){const t=e.eBV(n).$implicit,i=e.XpG(2);return e.Njj(i.removeTax(t.id))}),e.EFF(17,"Supprimer"),e.k0s()()()}if(2&o){const n=s.$implicit;e.R7$(2),e.JRh(n.name),e.R7$(2),e.JRh(n.category),e.R7$(2),e.SpI("",n.rate,"%"),e.R7$(2),e.JRh(n.period),e.R7$(2),e.JRh(n.dueDay||"-"),e.R7$(2),e.JRh(n.journal||"-"),e.R7$(2),e.JRh(n.account||"-")}}function M(o,s){if(1&o){const n=e.RV6();e.j41(0,"div",4)(1,"h3"),e.EFF(2,"Imp\xf4ts & Taxes"),e.k0s(),e.j41(3,"div",16)(4,"input",35),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.taxName,t)||(i.taxName=t),e.Njj(t)}),e.k0s(),e.j41(5,"select",36),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.taxCategory,t)||(i.taxCategory=t),e.Njj(t)}),e.j41(6,"option",37),e.EFF(7,"Fiscal"),e.k0s(),e.j41(8,"option",38),e.EFF(9,"Social"),e.k0s()(),e.j41(10,"input",39),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.taxRate,t)||(i.taxRate=t),e.Njj(t)}),e.k0s(),e.j41(11,"select",36),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.taxPeriod,t)||(i.taxPeriod=t),e.Njj(t)}),e.j41(12,"option",40),e.EFF(13,"Mensuel"),e.k0s(),e.j41(14,"option",41),e.EFF(15,"Trimestriel"),e.k0s(),e.j41(16,"option",42),e.EFF(17,"Annuel"),e.k0s()(),e.j41(18,"input",43),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.taxDueDay,t)||(i.taxDueDay=t),e.Njj(t)}),e.k0s(),e.j41(19,"input",44),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.taxJournal,t)||(i.taxJournal=t),e.Njj(t)}),e.k0s(),e.j41(20,"input",45),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.taxAccount,t)||(i.taxAccount=t),e.Njj(t)}),e.k0s(),e.j41(21,"button",17),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.addTax())}),e.EFF(22,"Ajouter"),e.k0s(),e.j41(23,"button",17),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.regenTaxesFromCountry())}),e.EFF(24,"R\xe9g\xe9n\xe9rer depuis le pays"),e.k0s()(),e.j41(25,"table",33)(26,"thead")(27,"tr")(28,"th"),e.EFF(29,"Nom"),e.k0s(),e.j41(30,"th"),e.EFF(31,"Cat\xe9gorie"),e.k0s(),e.j41(32,"th"),e.EFF(33,"Taux"),e.k0s(),e.j41(34,"th"),e.EFF(35,"P\xe9riode"),e.k0s(),e.j41(36,"th"),e.EFF(37,"\xc9ch\xe9ance"),e.k0s(),e.j41(38,"th"),e.EFF(39,"Journal"),e.k0s(),e.j41(40,"th"),e.EFF(41,"Compte"),e.k0s(),e.nrm(42,"th"),e.k0s()(),e.j41(43,"tbody"),e.DNE(44,b,18,7,"tr",15),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(4),e.R50("ngModel",n.taxName),e.R7$(),e.R50("ngModel",n.taxCategory),e.R7$(5),e.R50("ngModel",n.taxRate),e.R7$(),e.R50("ngModel",n.taxPeriod),e.R7$(7),e.R50("ngModel",n.taxDueDay),e.R7$(),e.R50("ngModel",n.taxJournal),e.R7$(),e.R50("ngModel",n.taxAccount),e.R7$(24),e.Y8G("ngForOf",n.taxes)}}function R(o,s){if(1&o){const n=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td")(10,"button",20),e.bIt("click",function(){const t=e.eBV(n).$implicit,i=e.XpG(2);return e.Njj(i.removeDirector(t.id))}),e.EFF(11,"Supprimer"),e.k0s()()()}if(2&o){const n=s.$implicit;e.R7$(2),e.JRh(n.name),e.R7$(2),e.JRh(n.role),e.R7$(2),e.JRh(n.email||"-"),e.R7$(2),e.JRh(n.phone||"-")}}function k(o,s){if(1&o){const n=e.RV6();e.j41(0,"div",4)(1,"h3"),e.EFF(2,"Dirigeants / Conseil d'Administration"),e.k0s(),e.j41(3,"div",16)(4,"input",23),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.dirName,t)||(i.dirName=t),e.Njj(t)}),e.k0s(),e.j41(5,"input",46),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.dirRole,t)||(i.dirRole=t),e.Njj(t)}),e.k0s(),e.j41(6,"input",24),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.dirEmail,t)||(i.dirEmail=t),e.Njj(t)}),e.k0s(),e.j41(7,"input",25),e.mxI("ngModelChange",function(t){e.eBV(n);const i=e.XpG();return e.DH7(i.dirPhone,t)||(i.dirPhone=t),e.Njj(t)}),e.k0s(),e.j41(8,"button",17),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.addDirector())}),e.EFF(9,"Ajouter"),e.k0s()(),e.j41(10,"table",33)(11,"thead")(12,"tr")(13,"th"),e.EFF(14,"Nom"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Fonction"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Email"),e.k0s(),e.j41(19,"th"),e.EFF(20,"T\xe9l\xe9phone"),e.k0s(),e.nrm(21,"th"),e.k0s()(),e.j41(22,"tbody"),e.DNE(23,R,12,4,"tr",15),e.k0s()()()}if(2&o){const n=e.XpG();e.R7$(4),e.R50("ngModel",n.dirName),e.R7$(),e.R50("ngModel",n.dirRole),e.R7$(),e.R50("ngModel",n.dirEmail),e.R7$(),e.R50("ngModel",n.dirPhone),e.R7$(16),e.Y8G("ngForOf",n.directors)}}let y=(()=>{class o{constructor(n){this.es=n,this.tab="IDENT",this.identity={name:"",legalForm:"",registrationNumber:"",taxId:"",activity:"",country:"",city:"",address:"",email:"",phone:"",banks:[]},this.settings={fiscal:{},social:{},app:{country:"",defaultJournal:"OD",defaultCurrency:"XOF",locale:"fr-FR",accountingSystem:"SYSCOHADA",chartOfAccounts:"SYSCOHADA"}},this.users=[],this.directors=[],this.taxes=[],this.newUser={name:"",email:"",phone:"",role:"COMPTABLE",rights:{canView:!0,canEditEntries:!0,canManageUsers:!1,canSubmitDeclarations:!0,canConfigure:!1,canImportExport:!0},active:!0},this.taxName="",this.taxCategory="FISCAL",this.taxRate=0,this.taxPeriod="MENSUEL",this.taxDueDay=0,this.taxJournal="",this.taxAccount="",this.dirName="",this.dirRole="",this.dirEmail="",this.dirPhone="",this.countries=[{code:"BF",name:"Burkina Faso",currency:"XOF",locale:"fr-FR",accountingSystem:"SYSCOHADA",chartOfAccounts:"SYSCOHADA"},{code:"CI",name:"C\xf4te d'Ivoire",currency:"XOF",locale:"fr-FR",accountingSystem:"SYSCOHADA",chartOfAccounts:"SYSCOHADA"},{code:"SN",name:"S\xe9n\xe9gal",currency:"XOF",locale:"fr-FR",accountingSystem:"SYSCOHADA",chartOfAccounts:"SYSCOHADA"},{code:"FR",name:"France",currency:"EUR",locale:"fr-FR",accountingSystem:"FR-PCG",chartOfAccounts:"FR-PCG"}],this.taxesDataset=[],this.pendingCountryCode=null,this.es.getIdentity().subscribe(r=>{this.identity=r,this.applyAutoTaxesIfReady()}),this.es.getSettings().subscribe(r=>{this.settings=r,this.applyAutoTaxesIfReady()}),this.es.getUsers().subscribe(r=>this.users=r),this.es.getDirectors().subscribe(r=>this.directors=r),this.es.getTaxes().subscribe(r=>this.taxes=r),fetch("assets/data/countries-accounting-json.json").then(r=>r.ok?r.json():null).then(r=>{r&&Array.isArray(r.countries)&&(this.countries=r.countries.map(t=>({code:t.code,name:t.name,currency:t.currency,locale:t.locale,accountingSystem:t.accountingSystem,chartOfAccounts:t.chartOfAccounts})))}).catch(()=>{}),this.loadTaxesDataset()}loadTaxesDataset(){var n=this;return(0,g.A)(function*(){try{let r=yield fetch("assets/data/taxes-by-country-json.json").then(t=>t.ok?t.json():null);(!r||!Array.isArray(r.countriesTaxes))&&(r=yield fetch("assets/data/countries-taxes.json").then(t=>t.ok?t.json():null)),r&&Array.isArray(r.countriesTaxes)&&(n.taxesDataset=r.countriesTaxes,n.applyAutoTaxesIfReady(),n.pendingCountryCode&&(n.applyTaxesForCountry(n.pendingCountryCode),n.pendingCountryCode=null))}catch{}})()}applyAutoTaxesIfReady(){const n=(this.settings?.app?.country||"").trim();!n||!this.taxesDataset.length||this.applyTaxesForCountry(n)}toPeriod(n){const r=(n||"").toLowerCase();return r.includes("trim")?"TRIMESTRIEL":r.includes("month")||r.includes("mens")?"MENSUEL":"ANNUEL"}applyTaxesForCountry(n){const r=n.toUpperCase(),t=this.taxesDataset.find(c=>String(c.code).toUpperCase()===r);if(!t||!t.taxes)return;const i=t.taxes,l=[];if(null!=i.vat?.standardRate&&l.push({name:i.vat.name||"TVA",category:"FISCAL",rate:Number(i.vat.standardRate),period:this.toPeriod(i.vat.declarationPeriod)||"MENSUEL",dueDay:void 0,journal:"",account:""}),null!=i.corporateIncomeTax?.rate&&l.push({name:i.corporateIncomeTax.name||"IS",category:"FISCAL",rate:Number(i.corporateIncomeTax.rate),period:this.toPeriod(i.corporateIncomeTax.declarationPeriod)||"ANNUEL",dueDay:void 0,journal:"",account:""}),null!=i.socialContributions?.employer?.rate||null!=i.socialContributions?.employee?.rate){const c=Number(i.socialContributions?.employer?.rate||0),d=Number(i.socialContributions?.employee?.rate||0);(c||d)&&l.push({name:i.socialContributions.name||"CNSS",category:"SOCIAL",rate:c+d,period:this.toPeriod(i.socialContributions.declarationPeriod)||"MENSUEL",dueDay:void 0,journal:"",account:""})}this.es.replaceAllTaxes(l)}saveIdentity(){this.es.updateIdentity(this.identity)}saveSettings(){this.es.updateSettings(this.settings)}onCountryChange(){const n=this.countries.find(r=>r.code===this.settings.app.country);n&&(this.settings.app.defaultCurrency=n.currency,this.settings.app.locale=n.locale,this.settings.app.accountingSystem=n.accountingSystem,this.settings.app.chartOfAccounts=n.chartOfAccounts,this.saveSettings(),this.taxesDataset.length?this.applyTaxesForCountry(n.code):this.pendingCountryCode=n.code)}templateFor(n){return this.es.roleTemplate(n)}applyRoleTemplate(){"PERSONNALISE"!==this.newUser.role&&(this.newUser.rights=this.es.roleTemplate(this.newUser.role))}addUser(){!this.newUser.name||!this.newUser.email||(this.es.addUser({name:this.newUser.name,email:this.newUser.email,phone:this.newUser.phone,role:this.newUser.role,rights:this.newUser.rights,active:!0}),this.newUser={name:"",email:"",phone:"",role:"COMPTABLE",rights:this.es.roleTemplate("COMPTABLE"),active:!0})}updateUser(n,r){this.es.updateUser(n.id,r)}removeUser(n){confirm("Supprimer cet utilisateur ?")&&this.es.removeUser(n.id)}addBank(){this.identity.banks.push({bankName:"",account:"",bic:""}),this.saveIdentity()}removeBank(n){this.identity.banks.splice(n,1),this.saveIdentity()}onLogo(n){const t=n.target.files?.[0];if(!t)return;const i=new FileReader;i.onload=()=>{this.identity.logoDataUrl=String(i.result||""),this.saveIdentity()},i.readAsDataURL(t)}addTax(){this.taxName&&(this.es.addTax({name:this.taxName,category:this.taxCategory,rate:Number(this.taxRate)||0,period:this.taxPeriod,dueDay:Number(this.taxDueDay)||void 0,journal:this.taxJournal||void 0,account:this.taxAccount||void 0}),this.taxName="",this.taxRate=0,this.taxPeriod="MENSUEL",this.taxDueDay=0,this.taxJournal="",this.taxAccount="")}removeTax(n){this.es.removeTax(n)}addDirector(){this.dirName&&(this.es.addDirector({name:this.dirName,role:this.dirRole,email:this.dirEmail||void 0,phone:this.dirPhone||void 0}),this.dirName=this.dirRole=this.dirEmail=this.dirPhone="")}removeDirector(n){this.es.removeDirector(n)}regenTaxesFromCountry(){const n=(this.settings?.app?.country||"").toUpperCase();n&&this.applyTaxesForCountry(n)}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(m.T))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-enterprise"]],standalone:!0,features:[e.aNF],decls:19,vars:15,consts:[[1,"module-container"],[1,"tabs"],[1,"tab",3,"click"],["class","panel",4,"ngIf"],[1,"panel"],[1,"grid"],[1,"input",3,"ngModelChange","change","ngModel"],["type","number","step","0.01",1,"input",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["disabled","",1,"input",3,"value"],["type","date",1,"input",3,"ngModelChange","change","ngModel"],["type","number","min","1","max","12",1,"input",3,"ngModelChange","change","ngModel"],["type","file","accept","image/*",1,"input",3,"change"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"toolbar"],[1,"btn",3,"click"],[3,"value"],["alt","logo",2,"max-height","64px","border","1px solid #e2e8f0","border-radius","6px",3,"src"],[1,"btn","danger",3,"click"],["value","sandbox"],["value","production"],["placeholder","Nom",1,"input",3,"ngModelChange","ngModel"],["placeholder","Email",1,"input",3,"ngModelChange","ngModel"],["placeholder","T\xe9l\xe9phone",1,"input",3,"ngModelChange","ngModel"],["value","ADMIN"],["value","COMPTABLE"],["value","VALIDEUR"],["value","LECTURE"],["value","PERSONNALISE"],[1,"grid","perms"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"table"],["type","checkbox",3,"ngModelChange","change","ngModel"],["placeholder","Nom (ex: TVA, IS, IUTS)",1,"input",3,"ngModelChange","ngModel"],[1,"input",3,"ngModelChange","ngModel"],["value","FISCAL"],["value","SOCIAL"],["type","number","step","0.01","placeholder","Taux (%)",1,"input",3,"ngModelChange","ngModel"],["value","MENSUEL"],["value","TRIMESTRIEL"],["value","ANNUEL"],["type","number","placeholder","Jour d'\xe9ch\xe9ance (ex: 15)",1,"input",3,"ngModelChange","ngModel"],["placeholder","Journal",1,"input",3,"ngModelChange","ngModel"],["placeholder","Compte",1,"input",3,"ngModelChange","ngModel"],["placeholder","Fonction",1,"input",3,"ngModelChange","ngModel"]],template:function(r,t){1&r&&(e.j41(0,"div",0)(1,"h1"),e.EFF(2,"\u{1f3e2} Entreprise"),e.k0s(),e.j41(3,"div",1)(4,"button",2),e.bIt("click",function(){return t.tab="IDENT"}),e.EFF(5,"Identification"),e.k0s(),e.j41(6,"button",2),e.bIt("click",function(){return t.tab="PLAT"}),e.EFF(7,"Param\xe9trages plateformes"),e.k0s(),e.j41(8,"button",2),e.bIt("click",function(){return t.tab="USERS"}),e.EFF(9,"Utilisateurs & droits"),e.k0s(),e.j41(10,"button",2),e.bIt("click",function(){return t.tab="TAXES"}),e.EFF(11,"Imp\xf4ts & Taxes"),e.k0s(),e.j41(12,"button",2),e.bIt("click",function(){return t.tab="BOARD"}),e.EFF(13,"Dirigeants"),e.k0s()(),e.DNE(14,C,81,24,"div",3)(15,F,63,13,"div",3)(16,f,56,11,"div",3)(17,M,45,8,"div",3)(18,k,24,5,"div",3),e.k0s()),2&r&&(e.R7$(4),e.AVh("active","IDENT"===t.tab),e.R7$(2),e.AVh("active","PLAT"===t.tab),e.R7$(2),e.AVh("active","USERS"===t.tab),e.R7$(2),e.AVh("active","TAXES"===t.tab),e.R7$(2),e.AVh("active","BOARD"===t.tab),e.R7$(2),e.Y8G("ngIf","IDENT"===t.tab),e.R7$(),e.Y8G("ngIf","PLAT"===t.tab),e.R7$(),e.Y8G("ngIf","USERS"===t.tab),e.R7$(),e.Y8G("ngIf","TAXES"===t.tab),e.R7$(),e.Y8G("ngIf","BOARD"===t.tab))},dependencies:[p.MD,p.Sq,p.bT,a.YN,a.xH,a.y7,a.me,a.Q0,a.Zm,a.wz,a.BC,a.VZ,a.zX,a.vS],styles:[".module-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:16px;box-shadow:0 4px 16px #00000014}.tabs[_ngcontent-%COMP%]{display:flex;gap:6px;margin-bottom:8px}.tab[_ngcontent-%COMP%]{padding:8px 12px;border:none;border-radius:6px;background:#e2e8f0;cursor:pointer}.tab.active[_ngcontent-%COMP%]{background:#3182ce;color:#fff}.panel[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;padding:12px;margin-bottom:12px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(220px,1fr));gap:8px}.grid.perms[_ngcontent-%COMP%]{grid-template-columns:repeat(6,minmax(160px,1fr))}.toolbar[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;margin:8px 0;flex-wrap:wrap}.input[_ngcontent-%COMP%]{padding:8px 10px;border:1px solid #e2e8f0;border-radius:6px}.btn[_ngcontent-%COMP%]{padding:8px 10px;border:none;border-radius:6px;background:#3182ce;color:#fff;cursor:pointer}.btn.danger[_ngcontent-%COMP%]{background:#e53e3e}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #e2e8f0;padding:8px 10px;text-align:left}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f7fafc}"]})}}return o})()}}]);